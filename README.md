Следующие шаги делать с помощью ansible


1. На хост установить гипервизор kvm (qemu-kvm, virsh) и необходимые пакеты (cloud-init)
2. Подготовить образ ОС для виртуализирования. Это могут быть готовые образы с cloud-images.ubuntu.com или любого другого дистрибутива (CentOS, Debian etc) или созданный вручную. Образ должен уметь работать с cloud-init
3. Инициализировать с помощью этого образа 2 инстанса в KVM
4. С помощью cloud-init инициализировать сеть в инстансах (с помощью монтируемого к инстансу iso), и установить необходимые для ansible пакеты
5. В инстансах в докер контейнерах установить postgresql (либо mysql), nginx (либо apache), и любую CMS, которая умеет работать с PGS - WordPress, Drupal, Bolt etc
6. Сконфигурировать CMS на работу с БД и веб-сервером (делать с помощью шаблонов ansible или с помощью модулей типа lineinfile)
7. С помощью HAproxy или любого другого балансировщика настроить балансировку http трафика между двумя инстансами
8. Обновить security пакеты в инстансах и закрыть файрволлом лишнее (с помощью iptables) 
9. Весь код выложить на github/gitlab на ревью (в идеале делать промежуточные коммиты, чтобы была видна хистори)
10. Optional: Установить и настроить Jenkins, создать пайплайн, который будет периодически вытягивать написанный код с github/gitlab и запускать все описанное выше автоматически в заданное время 


Примечания:
- Важно: Нельзя использовать ansible-galaxy и любой другой готовый код
- Если таску проще сделать с помощью баша, разрешается создание скрипта и вызов его через ansible
- Информация об URL, паролях, IP и тд не должна храниться в плейбуках/ролях. Только во внешних vars файлах
- Вместо использования vars/ директории с переменными для роли можно использовать определенные переменные в inventory файле
- Все таски должны быть rerunnable - это значит что повторный запуск не должен ничего сломать в окружении
- Использовать иерархию ansible ролей
- Пароли должны храниться в ansible в зашифрованном виде
- Использование nginx как бэкенд или фронтенд вместо apache - по желанию
- Код должен быть переносимым - запускаться на любой машине сразу после клонирования репы (не должно быть захардкоженых ключей)